<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-笔记/docker/docker_heima" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/25/%E7%AC%94%E8%AE%B0/docker/docker_heima/" class="article-date">
  <time class="dt-published" datetime="2023-05-25T08:31:59.344Z" itemprop="datePublished">2023-05-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="查看容器ip"><a href="#查看容器ip" class="headerlink" title="查看容器ip"></a>查看容器ip</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect -f <span class="string">&#x27;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27;</span> container_id</span><br></pre></td></tr></table></figure>



<h2 id="基于python镜像的后端Dockerfile"><a href="#基于python镜像的后端Dockerfile" class="headerlink" title="基于python镜像的后端Dockerfile"></a>基于python镜像的后端Dockerfile</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基于python3.9镜像</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span></span><br><span class="line"><span class="comment"># 设置工作目录</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装项目依赖</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install -r requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制项目代码</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对外暴露的端口号</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8123</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在启动时自动运行python run.py</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;python&quot;</span>, <span class="string">&quot;run.py&quot;</span>]</span></span><br></pre></td></tr></table></figure>



<p>docker容器转换成镜像</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit 容器<span class="built_in">id</span> 镜像名称:版本号</span><br></pre></td></tr></table></figure>

<h2 id="dockerfile概述及关键字"><a href="#dockerfile概述及关键字" class="headerlink" title="dockerfile概述及关键字"></a>dockerfile概述及关键字</h2><h3 id="一-dockerfile概念"><a href="#一-dockerfile概念" class="headerlink" title="一 dockerfile概念"></a>一 dockerfile概念</h3><p>dockerfile是一个文本文件</p>
<p>包含了一条条的指令</p>
<h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h2><p>Docker Compose 是一个编排多容器分布式部署的工具，提供命令集管理容器化应用的完整开发周期，包括服务构建，启动和停止。</p>
<p>使用步骤：</p>
<p>1.利用Dockerfile定义运行环境镜像</p>
<p>2.使用docker-compose.yml定义组成应用的各服务</p>
<p>3.运行<code>docker-compose up</code> 启动应用</p>
<h2 id="查看容器IP"><a href="#查看容器IP" class="headerlink" title="查看容器IP"></a>查看容器IP</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># docker inspect -f &#x27;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; 容器ID</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;thr&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;thr970726&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;thr&#x27;@&#x27;%&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># pwd</span><br><span class="line">/opt</span><br><span class="line"># mkdir -p docker_v/mysql/conf</span><br><span class="line"># cd docker_v/mysql/conf</span><br><span class="line"># touch my.cnf</span><br><span class="line"># docker run -p 3306:3306 --name mysql -v /opt/docker_v/mysql/conf:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=123456 -d imageID</span><br><span class="line">4ec4f56455ea2d6d7251a05b7f308e314051fdad2c26bf3d0f27a9b0c0a71414</span><br></pre></td></tr></table></figure>





<p>mysql连接远程数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 远程服务器IP地址 -P 3306 -u 用户名 -p</span><br><span class="line"></span><br><span class="line">mysql -h 172.17.0.6 -P 9306 -u thr -p thr970726</span><br></pre></td></tr></table></figure>





<h3 id="导出数据库文件"><a href="#导出数据库文件" class="headerlink" title="导出数据库文件"></a>导出数据库文件</h3><p>1.导出mysql文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u your_username -p your_database &gt; path/dump_file.sql</span><br></pre></td></tr></table></figure>





<p>Docker 将宿主机的内容复制到容器中</p>
<p>1.复制mysql内容</p>
<p>将本地内容复制到docker中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp /path/to/01.sql mysql-container:/docker-entrypoint-initdb.d/01.sql</span><br></pre></td></tr></table></figure>

<p>启动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /docker-entrypoint-initdb.d/init_mysql.sql</span><br></pre></td></tr></table></figure>



<h3 id="2-mongo"><a href="#2-mongo" class="headerlink" title="2.mongo"></a>2.mongo</h3><h4 id="下载mongo镜像"><a href="#下载mongo镜像" class="headerlink" title="下载mongo镜像"></a>下载mongo镜像</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mongo:3.6.3</span><br></pre></td></tr></table></figure>

<h4 id="运行mongo容器"><a href="#运行mongo容器" class="headerlink" title="运行mongo容器"></a>运行mongo容器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 27019:27017 --name mongo_container mongo:3.6.3</span><br></pre></td></tr></table></figure>

<h4 id="导出mongodb的数据"><a href="#导出mongodb的数据" class="headerlink" title="导出mongodb的数据"></a>导出mongodb的数据</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodump -h dbhost -d dbname -o dbdirectory</span><br></pre></td></tr></table></figure>

<ul>
<li><p>-h：</p>
<p>MongoDB 所在服务器地址，例如：127.0.0.1，当然也可以指定端口号：127.0.0.1:27017</p>
</li>
<li><p>-d：</p>
<p>需要备份的数据库实例，例如：test</p>
</li>
<li><p>-o：</p>
<p>备份的数据存放位置，例如：c:\data\dump，当然该目录需要提前建立，在备份完成后，系统自动在dump目录下建立一个test目录，这个目录里面存放该数据库实例的备份数据。</p>
</li>
</ul>
<p>对于16号机：</p>
<p>我们可以将文件导出到当前路径下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodump -h 222.20.95.239 --port 27000 -d zssr_dev -o .</span><br></pre></td></tr></table></figure>



<h4 id="恢复mongodb的数据"><a href="#恢复mongodb的数据" class="headerlink" title="恢复mongodb的数据"></a>恢复mongodb的数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongorestore -h &lt;hostname&gt;&lt;:port&gt; -d dbname &lt;path&gt;</span><br></pre></td></tr></table></figure>

<p>对于16号机：</p>
<p>由于我么之前设置的备份路径就是根目录下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">ls</span></span><br><span class="line">bin   data  docker-entrypoint-initdb.d	home	       js-yaml.js  lib32  libx32  mnt  proc  run   srv	tmp  var</span><br><span class="line">boot  dev   etc				init_mongo.js  lib	   lib64  media   opt  root  sbin  sys	usr  zssr_dev</span><br></pre></td></tr></table></figure>

<p>我们要是用的文件路径就是<code>./zssr_dev</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongorestore -h localhost:27017 -d zssr_dev ./zssr_dev</span><br></pre></td></tr></table></figure>





<p>复制</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式：</span></span><br><span class="line">docker <span class="built_in">cp</span> /path/to/data.js mongodb-container:/data.js</span><br><span class="line"><span class="comment"># 例子：</span></span><br><span class="line">docker <span class="built_in">cp</span> init_mongo.js 155b95a1a0aadee53f8695e2800f53094ca39b52c40788ed2e55c06e24ccc51c:/init_mongo.js</span><br></pre></td></tr></table></figure>



<p>构建数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use zssr_dev;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">load(&quot;path/to/build.js&quot;)</span><br></pre></td></tr></table></figure>



<p>使用mongoimport命令使用.json文件构建mongo数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongoimport --host your_host --port your_port --username your_username --password your_password --db your_database --collection your_collection --file your_file.json</span><br></pre></td></tr></table></figure>





<h2 id="服务器登录docker"><a href="#服务器登录docker" class="headerlink" title="服务器登录docker"></a>服务器登录docker</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker login &lt;仓库地址&gt;</span><br><span class="line">docker login 2649706356@qq.com</span><br><span class="line"><span class="comment"># 之后需要输入账户名和密码</span></span><br><span class="line"><span class="comment"># 我的账户名和密码分别是：</span></span><br><span class="line">tianhaoran</span><br><span class="line">thr970726</span><br></pre></td></tr></table></figure>








      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/25/%E7%AC%94%E8%AE%B0/docker/docker_heima/" data-id="clkkqtvya000s6dfy0j9h0tr0" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-笔记/docker/docker" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/23/%E7%AC%94%E8%AE%B0/docker/docker/" class="article-date">
  <time class="dt-published" datetime="2023-05-23T08:42:43.410Z" itemprop="datePublished">2023-05-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>如果你的 Flask 项目需要使用 MySQL、MongoDB 和 Neo4j 数据库，并且你希望将整个项目部署在 Docker 上，你可以按照以下步骤操作：</p>
<ol>
<li><p>编写 Dockerfile：在项目根目录下创建一个名为 Dockerfile 的文件，并编写用于构建镜像的 Dockerfile 内容。你可以使用多阶段构建来分别处理 Python 代码和数据库服务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">DockerfileCopy code</span><br><span class="line"># 阶段一：构建 Python 代码</span><br><span class="line">FROM python:3.9 AS base</span><br><span class="line"></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"># 安装项目依赖</span><br><span class="line">COPY requirements.txt .</span><br><span class="line">RUN pip install --no-cache-dir -r requirements.txt</span><br><span class="line"></span><br><span class="line"># 复制项目代码</span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line"># 阶段二：构建 MySQL 服务</span><br><span class="line">FROM mysql:latest AS mysql</span><br><span class="line"></span><br><span class="line"># 配置 MySQL 环境变量和初始化脚本</span><br><span class="line">ENV MYSQL_DATABASE=db_name \</span><br><span class="line">    MYSQL_USER=db_user \</span><br><span class="line">    MYSQL_PASSWORD=db_password \</span><br><span class="line">    MYSQL_ROOT_PASSWORD=root_password</span><br><span class="line"></span><br><span class="line">COPY init_mysql.sql /docker-entrypoint-initdb.d/</span><br><span class="line"></span><br><span class="line"># 阶段三：构建 MongoDB 服务</span><br><span class="line">FROM mongo:latest AS mongo</span><br><span class="line"></span><br><span class="line"># 配置 MongoDB 环境变量和初始化脚本</span><br><span class="line">ENV MONGO_INITDB_ROOT_USERNAME=mongo_user \</span><br><span class="line">    MONGO_INITDB_ROOT_PASSWORD=mongo_password</span><br><span class="line"></span><br><span class="line">COPY init_mongo.js /docker-entrypoint-initdb.d/</span><br><span class="line"></span><br><span class="line"># 阶段四：构建 Neo4j 服务</span><br><span class="line">FROM neo4j:latest AS neo4j</span><br><span class="line"></span><br><span class="line"># 配置 Neo4j 环境变量和初始化脚本</span><br><span class="line">ENV NEO4J_AUTH=neo4j/neo4j_password</span><br><span class="line"></span><br><span class="line">COPY init_neo4j.cypher /docker-entrypoint-initdb.d/</span><br><span class="line"></span><br><span class="line"># 阶段五：组合所有服务</span><br><span class="line">FROM base</span><br><span class="line"></span><br><span class="line"># 复制 MySQL、MongoDB 和 Neo4j 的服务配置</span><br><span class="line">COPY --from=mysql / /</span><br><span class="line">COPY --from=mongo / /</span><br><span class="line">COPY --from=neo4j / /</span><br><span class="line"></span><br><span class="line"># 设置启动命令</span><br><span class="line">CMD [&quot;python&quot;, &quot;app.py&quot;]</span><br></pre></td></tr></table></figure>

<p>请注意，上述 Dockerfile 是一个简化的示例，你需要根据你的项目结构和需求进行相应的修改。</p>
</li>
<li><p>编写数据库初始化脚本：根据每个数据库的需求，编写相应的初始化脚本。</p>
<ul>
<li>对于 MySQL，可以创建一个名为 <code>init_mysql.sql</code> 的脚本文件，包含数据库和表的初始化语句。</li>
<li>对于 MongoDB，可以创建一个名为 <code>init_mongo.js</code> 的脚本文件，包含初始化集合和文档的语句。</li>
<li>对于 Neo4j，可以创建一个名为 <code>init_neo4j.cypher</code> 的脚本文件，包含初始化节点和关系的 Cypher 查询。</li>
</ul>
<p>你可以根据数据库的需求和你的项目来编写相应的初始化脚本。</p>
</li>
<li><p>构建和运行 Docker 镜像：在项目根目录下，使用以下命令来构建 Docker 镜像并运行容器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shellCopy code</span><br><span class="line"># 构建镜像</span><br><span class="line">docker build -t your_image_name .</span><br><span class="line"></span><br><span class="line"># 运行容器</span><br><span class="line">docker run -d -p 5000:5000 --name your_container_name your_image_name</span><br></pre></td></tr></table></figure>

<p>这将会构建一个名为 <code>your_image_name</code> 的 Docker 镜像，并将容器的 5000 端口映射到主机的 5000 端口。你可以根据需要进行修改。</p>
<p>当容器启动后，你的 Flask 项目将会运行，并可以访问 MySQL、MongoDB 和 Neo4j 数据库服务。</p>
</li>
</ol>
<p>请确保在 Docker 环境中配置好相应的数据库连接参数，并在 Dockerfile 中正确地配置数据库服务的环境变量和初始化脚本。</p>
<p>希望这些步骤能帮助你将 Flask 项目与 MySQL、MongoDB 和 Neo4j 数据库一起部署到 Docker 上。</p>
<h2 id="运行mysql容器"><a href="#运行mysql容器" class="headerlink" title="运行mysql容器"></a>运行mysql容器</h2><p>docker run -d -p 9011:3306 –name mysql_test_cont mysql:thr_test</p>
<h2 id="启动容器命令行"><a href="#启动容器命令行" class="headerlink" title="启动容器命令行"></a>启动容器命令行</h2><p>docker exec -it 37808822948c4a16189d9a429302cd1b408fe10f05a234fcac9f37de5266f88a &#x2F;bin&#x2F;sh</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/23/%E7%AC%94%E8%AE%B0/docker/docker/" data-id="clkkqtvyd000y6dfybnn640ye" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-笔记/论文/论文精读/T5_model" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/16/%E7%AC%94%E8%AE%B0/%E8%AE%BA%E6%96%87/%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/T5_model/" class="article-date">
  <time class="dt-published" datetime="2023-05-16T12:04:35.795Z" itemprop="datePublished">2023-05-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/16/%E7%AC%94%E8%AE%B0/%E8%AE%BA%E6%96%87/%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/T5_model/" data-id="clkkqtvyk001a6dfy4xlj4es2" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-笔记/git/pycharm_git" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/14/%E7%AC%94%E8%AE%B0/git/pycharm_git/" class="article-date">
  <time class="dt-published" datetime="2023-05-14T09:42:41.050Z" itemprop="datePublished">2023-05-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/14/%E7%AC%94%E8%AE%B0/git/pycharm_git/" data-id="clkkqtvyf000z6dfy7t6u5h6y" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-python/深度学习/tqdm" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/11/python/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/tqdm/" class="article-date">
  <time class="dt-published" datetime="2023-05-11T05:38:48.793Z" itemprop="datePublished">2023-05-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="tqdm"><a href="#tqdm" class="headerlink" title="tqdm"></a>tqdm</h2><h2 id="一-导入"><a href="#一-导入" class="headerlink" title="一 导入"></a>一 导入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br></pre></td></tr></table></figure>



<h2 id="二-作用"><a href="#二-作用" class="headerlink" title="二 作用"></a>二 作用</h2><p>tqdm主要是用于在jupyter中展示循环的进度</p>
<h2 id="三-示例"><a href="#三-示例" class="headerlink" title="三 示例"></a>三 示例</h2><p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test_set_similarity = [cosine_sim(t1, t2) <span class="keyword">for</span> t1, t2 <span class="keyword">in</span> tqdm(<span class="built_in">zip</span>(test1.content_en, test2.translated))]</span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">sns.distplot(test_set_similarity);</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p>![image-20230511134037494](&#x2F;Users&#x2F;tianhaoran&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230511134037494.png)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/11/python/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/tqdm/" data-id="clkkqtvya000q6dfya9o13p7a" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-python/python基础/python2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/07/python/python%E5%9F%BA%E7%A1%80/python2/" class="article-date">
  <time class="dt-published" datetime="2023-05-07T10:01:59.000Z" itemprop="datePublished">2023-05-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="第一章-数据类型"><a href="#第一章-数据类型" class="headerlink" title="第一章 数据类型"></a>第一章 数据类型</h2><h3 id="1-字符串"><a href="#1-字符串" class="headerlink" title="1.字符串"></a>1.字符串</h3><h4 id="（1）字符串的特殊表示"><a href="#（1）字符串的特殊表示" class="headerlink" title="（1）字符串的特殊表示"></a>（1）字符串的特殊表示</h4><ul>
<li><code>u</code>表示unicode</li>
<li><code>b</code>表示字节字符串（二进制数据）</li>
<li><code>f</code>最常用，表示格式化字符串，即<code>f-string</code></li>
<li><code>r</code>表示原始字符串<code>raw string</code>，这样的字符串中的转义字符会被保留</li>
</ul>
<h2 id="第二章-文件操作"><a href="#第二章-文件操作" class="headerlink" title="第二章 文件操作"></a>第二章 文件操作</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br></pre></td></tr></table></figure>

<h3 id="1-读取文件"><a href="#1-读取文件" class="headerlink" title="1.读取文件"></a>1.读取文件</h3><h4 id="（1）open"><a href="#（1）open" class="headerlink" title="（1）open()"></a>（1）<code>open()</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;文件路径/文件名&#x27;</span>, encoding = <span class="string">&#x27;utf-8&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">  corpus = f.read().strip(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="comment"># 使用with时，python会自动判断，在不需要使用文件时自动关闭文件</span></span><br><span class="line"><span class="comment"># 也就是说，不需要写f.close()</span></span><br></pre></td></tr></table></figure>

<h4 id="（2）read"><a href="#（2）read" class="headerlink" title="（2）read()"></a>（2）<code>read()</code></h4><ul>
<li><code>read()</code>方法用于读取整个文件，将文件的内容放入到一个<code>字符串</code>变量中</li>
<li>如果文件过大，不能使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">#### （3）`readlines()`</span><br><span class="line"></span><br><span class="line">- 将结果按行读取，并放到一个列表中，列表中的每个元素是一行，每个元素的末尾都有有`\n`座位换行符</span><br><span class="line">- 这种方式方便使用`strip()`，可以将每行中不想要的内容删掉</span><br><span class="line"></span><br><span class="line">#### （4）`readline()`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2.`strip( )`去掉首、末位置不想要的内容</span><br><span class="line"></span><br><span class="line">- 在不使用关键词时，`strip( )`会默认清理掉文本字符串开始和末尾的空格</span><br><span class="line">- 在`strip()`的参数中添加任何内容，都会在字符串的开始和末尾去掉参数中的内容</span><br><span class="line">- 可以连续使用`strip()`来连续删除不想要的内容`line.strip(&#x27;\n&#x27;).strip(&#x27;\t&#x27;)`</span><br><span class="line">- 可以使用`lstrip()`和`rstrip()`分别删除字符串左侧（开头的内容）或字符串右侧（结尾）的内容</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">SELECT sr.score_person_num, table1.tot AS `学`, table2.tot AS `丢雷老母`, table3.tot AS `写`, table4.tot AS `用`, </span><br><span class="line">       table5.tot AS `风控`, table6.tot AS `改进`, table7.tot AS `效率`, table8.tot AS `创新`, table9.tot AS `素质`, </span><br><span class="line">       table10.tot AS `素养`, table12.tot AS `个人`, table14.tot AS `程子队展得`, table15.tot AS `我真是日了狗了`</span><br><span class="line">FROM score_record AS sr</span><br><span class="line">LEFT JOIN (</span><br><span class="line">    SELECT score_person_num, SUM(value) AS tot </span><br><span class="line">    FROM score_record </span><br><span class="line">    WHERE score_item_id IN (SELECT id FROM score_item WHERE score_categoty_id = 1)</span><br><span class="line">    GROUP BY score_person_num</span><br><span class="line">) AS table1 ON sr.score_person_num = table1.score_person_num </span><br><span class="line">LEFT JOIN (</span><br><span class="line">    SELECT score_person_num, SUM(value) AS tot </span><br><span class="line">    FROM score_record </span><br><span class="line">    WHERE score_item_id IN (SELECT id FROM score_item WHERE score_categoty_id = 2)</span><br><span class="line">    GROUP BY score_person_num</span><br><span class="line">) AS table2 ON sr.score_person_num = table2.score_person_num </span><br><span class="line">LEFT JOIN (</span><br><span class="line">    SELECT score_person_num, SUM(value) AS tot </span><br><span class="line">    FROM score_record </span><br><span class="line">    WHERE score_item_id IN (SELECT id FROM score_item WHERE score_categoty_id = 3)</span><br><span class="line">    GROUP BY score_person_num</span><br><span class="line">) AS table3 ON sr.score_person_num = table3.score_person_num </span><br><span class="line">LEFT JOIN (</span><br><span class="line">    SELECT score_person_num, SUM(value) AS tot </span><br><span class="line">    FROM score_record </span><br><span class="line">    WHERE score_item_id IN (SELECT id FROM score_item WHERE score_categoty_id = 4)</span><br><span class="line">    GROUP BY score_person_num</span><br><span class="line">) AS table4 ON sr.score_person_num = table4.score_person_num </span><br><span class="line">LEFT JOIN (</span><br><span class="line">    SELECT score_person_num, SUM(value) AS tot </span><br><span class="line">    FROM score_record </span><br><span class="line">    WHERE score_item_id IN (SELECT id FROM score_item WHERE score_categoty_id = 5)</span><br><span class="line">    GROUP BY score_person_num</span><br><span class="line">) AS table5 ON sr.score_person_num = table5.score_person_num </span><br><span class="line">LEFT JOIN (</span><br><span class="line">    SELECT score_person_num, SUM(value) AS tot </span><br><span class="line">    FROM score_record </span><br><span class="line">    WHERE score_item_id IN (SELECT id FROM score_item WHERE score_categoty_id = 6)</span><br><span class="line">    GROUP BY score_person_num</span><br><span class="line">) AS table6 ON sr.score_person_num = table6.score_person_num </span><br><span class="line">LEFT JOIN (</span><br><span class="line">    SELECT score_person_num, SUM(value) AS tot </span><br><span class="line">    FROM score_record </span><br><span class="line">    WHERE score_item_id IN (SELECT id FROM score_item WHERE score_categoty_id = 7)</span><br><span class="line">    GROUP BY score_person_num</span><br><span class="line">) AS table7 ON sr.score_person_num = table7.score_person_num </span><br><span class="line">LEFT JOIN (</span><br><span class="line">    SELECT score_person_num, SUM(value) AS tot </span><br><span class="line">    FROM score_record </span><br><span class="line">    WHERE score_item_id IN (SELECT id FROM score_item WHERE score_categoty_id = 8)</span><br><span class="line">    GROUP BY score_person_num</span><br><span class="line">) AS table</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="3-split"><a href="#3-split" class="headerlink" title="3.split()"></a>3.<code>split()</code></h3><h3 id="4-使用yaml文件"><a href="#4-使用yaml文件" class="headerlink" title="4.使用yaml文件"></a>4.使用<code>yaml</code>文件</h3><ul>
<li>通常情况下，<code>yaml</code>文件用来存放参数，通常会写作<code>config.yaml</code></li>
<li><code>yaml</code>文件使用缩进表示层级关系，层级关系只能使用空格，不能使用tab</li>
</ul>
<h2 id="第三章-关键词"><a href="#第三章-关键词" class="headerlink" title="第三章 关键词"></a>第三章 关键词</h2><h3 id="1-with"><a href="#1-with" class="headerlink" title="1.with"></a>1.with</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span>是一种上下文管理协议</span><br></pre></td></tr></table></figure>

<h3 id="2-any-if-any"><a href="#2-any-if-any" class="headerlink" title="2.any&#x2F;if any"></a>2.any&#x2F;if any</h3><p><code>if any</code>是一个条件判断语句，用于检查可迭代对象中是否存在某一元素符合给定的条件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">any</span>(condition <span class="keyword">for</span> item <span class="keyword">in</span> iterable):</span><br><span class="line">  <span class="comment"># code</span></span><br></pre></td></tr></table></figure>

<p>例1（简单用例）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">any</span>(num &gt; <span class="number">3</span> <span class="keyword">for</span> num <span class="keyword">in</span> numbers):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;存在大于3的数字&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不存在大于3的数字&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>例2（BERT用例）：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">any</span>(</span><br><span class="line">	n <span class="keyword">in</span> [<span class="string">&quot;adam_v&quot;</span>, <span class="string">&quot;adam_m&quot;</span>, <span class="string">&quot;AdamWeightDecayOptimizer&quot;</span>, <span class="string">&quot;AdamWeightDecayOptimizer_1&quot;</span>,<span class="string">&quot;global_step&quot;</span>]</span><br><span class="line">  <span class="keyword">for</span> n <span class="keyword">in</span> name</span><br><span class="line">):</span><br><span class="line">  logging.info(<span class="string">f&quot;Skipping <span class="subst">&#123;<span class="string">&#x27;/&#x27;</span>.join(name)&#125;</span>&quot;</span>)</span><br><span class="line">  <span class="keyword">continue</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="3-getattr"><a href="#3-getattr" class="headerlink" title="3.getattr"></a>3.getattr</h3><p><code>getattr</code>用于获取对象的属性值或方法，用法为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">getattr</span>(<span class="built_in">object</span>, attribute[, default])</span><br></pre></td></tr></table></figure>

<p><code>object</code>– 对象</p>
<p><code>attribute</code> – 要获取的属性或方法的名称</p>
<p><code>default</code> – 可选参数，在属性或方法不存在时，返回的默认值，默认为None</p>
<p>例（Bert例）：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BertEmbeddings</span>(nn.Module):</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, config</span>):</span><br><span class="line">    ...</span><br><span class="line">    self.position_embedding_type = <span class="built_in">getattr</span>(config, <span class="string">&quot;position_embedding_type&quot;</span>, <span class="string">&quot;absolute&quot;</span>)</span><br><span class="line">    </span><br></pre></td></tr></table></figure>



<h2 id="第四章-面向对象"><a href="#第四章-面向对象" class="headerlink" title="第四章 面向对象"></a>第四章 面向对象</h2><h3 id="1-类的继承"><a href="#1-类的继承" class="headerlink" title="1.类的继承"></a>1.类的继承</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">father</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.a = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">son</span>(<span class="title class_ inherited__">father</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 子类的初始化继承了父类的初始化</span></span><br><span class="line">        <span class="built_in">super</span>(son, self).__init__()</span><br><span class="line">        self.b = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    s = son()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;s.a: &quot;</span>,s.a)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;s.b: &quot;</span>,s.b)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="第五章-模块"><a href="#第五章-模块" class="headerlink" title="第五章 模块"></a>第五章 模块</h2><h3 id="1-logging"><a href="#1-logging" class="headerlink" title="1.logging"></a>1.logging</h3><p>常用的函数：<code>debug(), info(), warning(), error(), critical()</code></p>
<p>![image-20230418151305777](&#x2F;Users&#x2F;tianhaoran&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230418151305777.png)</p>
<p>以恩施项目中的配置文件<code>config.py</code>为例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Config</span>():</span><br><span class="line">    <span class="comment"># token设置</span></span><br><span class="line">    ENCRYPTION_KEY = <span class="string">&#x27;enshi_smoke&#x27;</span></span><br><span class="line">    TOKEN_VALID_SECOND = <span class="number">3600</span></span><br><span class="line">    <span class="comment"># log设置</span></span><br><span class="line">    LOG_LEVEL = logging.INFO</span><br><span class="line">    LOG_SAVE_DIR = <span class="string">&#x27;logs&#x27;</span></span><br><span class="line">    LOG_FILE_NAME = <span class="string">&#x27;zssr.log&#x27;</span></span><br><span class="line">    <span class="comment"># Bytes</span></span><br><span class="line">    LOG_FILE_SIZE = <span class="number">100</span> * <span class="number">1024</span> * <span class="number">1024</span></span><br><span class="line">    LOG_FILE_NUM = <span class="number">100</span></span><br><span class="line">    <span class="comment"># 数据库存储加密设置</span></span><br><span class="line">    AES_ENCRYPTION_KEY = <span class="string">&#x27;enshi_smoke&#x27;</span></span><br></pre></td></tr></table></figure>



<h3 id="2-argparse"><a href="#2-argparse" class="headerlink" title="2.argparse"></a>2.argparse</h3><p><code>argparse</code>是python标准库中的命令行解析模块</p>
<ul>
<li>主要的作用是，当我们用过命令行运行python文件时，可以在其中通过设定好的参数名称添加参数来运行</li>
<li>比如，<code>python demo01.py --name tianhaoran --sex male --age 26</code></li>
<li>通过这样的方式，给python程序中的某些参数赋值</li>
</ul>
<p>代码样例：</p>
<ul>
<li>csdn博客示例</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&quot;Demo of argparse&quot;</span>)</span><br><span class="line">    <span class="comment"># 当我们在python &lt;文件名&gt; 后面输入-n或者--name时，后面跟上的参数应该是名字</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-n&#x27;</span>,<span class="string">&#x27;--name&#x27;</span>, default=<span class="string">&#x27; Li &#x27;</span>)</span><br><span class="line">    <span class="comment"># 同理，可以通过-y或--year来输入年龄</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-y&#x27;</span>,<span class="string">&#x27;--year&#x27;</span>, default=<span class="string">&#x27;20&#x27;</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line">    name = args.name</span><br><span class="line">    year = args.year</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello &#123;&#125;  &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(name,year))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>paddle项目示例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 3.os模块</span><br><span class="line"></span><br><span class="line">`os = operating system`，主要用于和操作系统交互，是python的自带模块</span><br><span class="line"></span><br><span class="line">- 使用os模块：</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">import os  # 注意不要写成from os import ... 不然可能会导致os中的函数与python中的函数冲突</span><br></pre></td></tr></table></figure>

<ul>
<li>os模块的常用函数:</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd()  <span class="comment"># 获取当前的路径</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(<span class="string">&#x27;path&#x27;</span>)  <span class="comment"># 切换路径</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>os.path</code>模块</p>
<ul>
<li><p>使用<code>os.path</code>获取当前环境的路径</p>
</li>
<li><p>使用<code>os.path.abspath(相对路径)</code>来获得某个相对路径对应的绝对路径，如下</p>
</li>
<li><pre><code class="python">  # 获得当前路径的绝对路径：
  print(os.path.abspath(&#39;./&#39;))  # 得到当前的绝对路径
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 4.typing模块</span><br><span class="line"></span><br><span class="line">- 允许python给出函数的参数、返回值类型</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">def 函数名(参数: 类型) -&gt; 返回值类型:</span><br><span class="line">  pass</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>运行给变量直接写出类型：</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量名: 数据类型 = 值</span><br></pre></td></tr></table></figure>





<h2 id="第六章-函数"><a href="#第六章-函数" class="headerlink" title="第六章 函数"></a>第六章 函数</h2><h3 id="1-函数的参数"><a href="#1-函数的参数" class="headerlink" title="1.函数的参数"></a>1.函数的参数</h3><p>对于python中内置的函数，一般会有三个参数<code>self, *args, **kwargs</code></p>
<ul>
<li><code>*args</code> 属于python的<code>unpacking</code>，用于将多个参数打包成<code>元组</code>，适用于调用时直接写<code>实参</code>的情况</li>
<li><code>**kwargs</code>用于将多个参数打包成<code>字典</code>，适用于调用时写<code>形参=实参</code>的情况</li>
</ul>
<p>举例：一下是python内置类<code>argparse</code>中的<code>add_argument</code>函数</p>
<ul>
<li><code>dest </code>在中文中指的是<code>目标对象</code> </li>
<li><code>dest supplied twice for positional argument</code>的意思是<code>为某个位置的参数提供了两次目标对象</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_argument</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    add_argument(dest, ..., name=value, ...)</span></span><br><span class="line"><span class="string">    add_argument(option_string, option_string, ..., name=value, ...)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># if no positional args are supplied or only one is supplied and</span></span><br><span class="line">    <span class="comment"># it doesn&#x27;t look like an option string, parse a positional</span></span><br><span class="line">    <span class="comment"># argument</span></span><br><span class="line">    chars = self.prefix_chars</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> args <span class="keyword">or</span> <span class="built_in">len</span>(args) == <span class="number">1</span> <span class="keyword">and</span> args[<span class="number">0</span>][<span class="number">0</span>] <span class="keyword">not</span> <span class="keyword">in</span> chars:</span><br><span class="line">        <span class="keyword">if</span> args <span class="keyword">and</span> <span class="string">&#x27;dest&#x27;</span> <span class="keyword">in</span> kwargs:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;dest supplied twice for positional argument&#x27;</span>)</span><br><span class="line">        kwargs = self._get_positional_kwargs(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># otherwise, we&#x27;re adding an optional argument</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        kwargs = self._get_optional_kwargs(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># if no default was supplied, use the parser-level default</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;default&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> kwargs:</span><br><span class="line">        dest = kwargs[<span class="string">&#x27;dest&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> dest <span class="keyword">in</span> self._defaults:</span><br><span class="line">            kwargs[<span class="string">&#x27;default&#x27;</span>] = self._defaults[dest]</span><br><span class="line">        <span class="keyword">elif</span> self.argument_default <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            kwargs[<span class="string">&#x27;default&#x27;</span>] = self.argument_default</span><br><span class="line"></span><br><span class="line">    <span class="comment"># create the action object, and add it to the parser</span></span><br><span class="line">    action_class = self._pop_action_class(kwargs)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">callable</span>(action_class):</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&#x27;unknown action &quot;%s&quot;&#x27;</span> % (action_class,))</span><br><span class="line">    action = action_class(**kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># raise an error if the action type is not callable</span></span><br><span class="line">    type_func = self._registry_get(<span class="string">&#x27;type&#x27;</span>, action.<span class="built_in">type</span>, action.<span class="built_in">type</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">callable</span>(type_func):</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&#x27;%r is not callable&#x27;</span> % (type_func,))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> type_func <span class="keyword">is</span> FileType:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&#x27;%r is a FileType class object, instance of it&#x27;</span></span><br><span class="line">                         <span class="string">&#x27; must be passed&#x27;</span> % (type_func,))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># raise an error if the metavar does not match the type</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">hasattr</span>(self, <span class="string">&quot;_get_formatter&quot;</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self._get_formatter()._format_args(action, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">except</span> TypeError:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;length of metavar tuple does not match nargs&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> self._add_action(action)</span><br></pre></td></tr></table></figure>



<h2 id="第七章-python解释器"><a href="#第七章-python解释器" class="headerlink" title="第七章 python解释器"></a>第七章 python解释器</h2><h3 id="1-使用yaml文件"><a href="#1-使用yaml文件" class="headerlink" title="1.使用yaml文件"></a>1.使用yaml文件</h3><h4 id="（1）yaml文件是什么"><a href="#（1）yaml文件是什么" class="headerlink" title="（1）yaml文件是什么"></a>（1）yaml文件是什么</h4><p>例1：下面是一个用于深度学习的yaml文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Copyright (c) 2020 PaddlePaddle Authors. All Rights Reserved.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"># you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"># You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">runner:</span></span><br><span class="line">  <span class="attr">train_data_dir:</span> <span class="string">&quot;../data/train&quot;</span></span><br><span class="line">  <span class="attr">train_reader_path:</span> <span class="string">&quot;reader&quot;</span>  <span class="comment"># importlib format</span></span><br><span class="line">  <span class="attr">train_batch_size:</span> <span class="number">128</span></span><br><span class="line">  <span class="attr">model_save_path:</span> <span class="string">&quot;output_model_recall&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">use_gpu:</span> <span class="literal">True</span></span><br><span class="line">  <span class="attr">epochs:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">print_interval:</span> <span class="number">20</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">test_data_dir:</span> <span class="string">&quot;../data/test&quot;</span></span><br><span class="line">  <span class="attr">infer_reader_path:</span> <span class="string">&quot;reader&quot;</span>  <span class="comment"># importlib format</span></span><br><span class="line">  <span class="attr">infer_batch_size:</span> <span class="number">128</span></span><br><span class="line">  <span class="attr">infer_load_path:</span> <span class="string">&quot;output_model_recall&quot;</span></span><br><span class="line">  <span class="attr">infer_start_epoch:</span> <span class="number">4</span></span><br><span class="line">  <span class="attr">infer_end_epoch:</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">runner_result_dump_path:</span> <span class="string">&quot;recall_infer_result&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hyper parameters of user-defined network</span></span><br><span class="line"><span class="attr">hyper_parameters:</span></span><br><span class="line">  <span class="comment"># optimizer config</span></span><br><span class="line">  <span class="attr">optimizer:</span></span><br><span class="line">    <span class="attr">class:</span> <span class="string">Adam</span></span><br><span class="line">    <span class="attr">learning_rate:</span> <span class="number">0.001</span></span><br><span class="line">  <span class="comment"># user-defined &lt;key, value&gt; pairs</span></span><br><span class="line">  <span class="attr">sparse_feature_number:</span> <span class="number">600000</span></span><br><span class="line">  <span class="attr">sparse_feature_dim:</span> <span class="number">9</span></span><br><span class="line">  <span class="attr">dense_input_dim:</span> <span class="number">13</span></span><br><span class="line">  <span class="attr">fc_sizes:</span> [<span class="number">512</span>, <span class="number">256</span>, <span class="number">128</span>, <span class="number">32</span>]</span><br></pre></td></tr></table></figure>

<p>使用该yaml文件时，可以在命令行输入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -u trianer.py -m config.yaml</span><br></pre></td></tr></table></figure>



<h4 id="（2）python使用yaml"><a href="#（2）python使用yaml" class="headerlink" title="（2）python使用yaml"></a>（2）python使用yaml</h4><ul>
<li>安装yaml</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install yaml</span><br></pre></td></tr></table></figure>

<ul>
<li>读取config文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">config_path = <span class="string">&#x27;./config.yaml&#x27;</span></span><br><span class="line">f = <span class="built_in">open</span>(config_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)  <span class="comment"># 用这种方法读取出来的yaml文件是str，不方便使用</span></span><br><span class="line">config = f.read()</span><br><span class="line">config = yaml.load(config, Loader=yaml.FullLoader)   <span class="comment"># 使用yaml.load转换成字典</span></span><br><span class="line">use_gpu = config[<span class="string">&#x27;runner&#x27;</span>][<span class="string">&#x27;use_gpu&#x27;</span>]</span><br><span class="line">train_data_dir = config[<span class="string">&#x27;runner&#x27;</span>][<span class="string">&#x27;train_data_dir&#x27;</span>]</span><br><span class="line">epochs = config[<span class="string">&#x27;runner&#x27;</span>][<span class="string">&#x27;epochs&#x27;</span>]</span><br><span class="line">print_interval = config[<span class="string">&#x27;runner&#x27;</span>][<span class="string">&#x27;print_interval&#x27;</span>]</span><br><span class="line">model_save_path = config[<span class="string">&#x27;runner&#x27;</span>][<span class="string">&#x27;model_save_path&#x27;</span>]    </span><br></pre></td></tr></table></figure>





<h2 id="第八章-日志"><a href="#第八章-日志" class="headerlink" title="第八章 日志"></a>第八章 日志</h2><h3 id="1-日志的导入"><a href="#1-日志的导入" class="headerlink" title="1.日志的导入"></a>1.日志的导入</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br></pre></td></tr></table></figure>

<p><code>logging</code>是python自带的包</p>
<h3 id="2-日志的格式设置"><a href="#2-日志的格式设置" class="headerlink" title="2.日志的格式设置"></a>2.日志的格式设置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">logging.basicConfig(</span><br><span class="line">		<span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(levelname)s - %(message)s&#x27;</span></span><br><span class="line">  	level=logging.INGO</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>format是日志的格式</p>
<ul>
<li>分别用字符串的格式展示了时间，日志的级别名称和日志信息，比如：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2023-04-22 13:21:30,875 - INFO - **************common.configs**********</span><br></pre></td></tr></table></figure>

<ul>
<li><code>level = logging.INFO</code>表示日志的级别是INFO，</li>
<li>日志的级别共分为5个等级，从最详细，到最不详细分别为：<ul>
<li>DEBUG：全部信息</li>
<li>INFO：重要信息</li>
<li>WARNING：警告</li>
<li>ERROR：错误</li>
<li>CRITICAL：严重错误</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第九章-lambda表达式"><a href="#第九章-lambda表达式" class="headerlink" title="第九章 lambda表达式"></a>第九章 lambda表达式</h2><p>常规的写法为<code>lambda 变量: 返回值</code></p>
<p>![Pasted image 20230308092119](&#x2F;Users&#x2F;tianhaoran&#x2F;Library&#x2F;Mobile Documents&#x2F;iCloud<del>md</del>obsidian&#x2F;Documents&#x2F;obsidian_mac&#x2F;图片&#x2F;Pasted image 20230308092119.png)</p>
<h3 id="1-常见示例"><a href="#1-常见示例" class="headerlink" title="1.常见示例"></a>1.常见示例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df_train = pd.read_csv(<span class="string">&#x27;./data/train.csv&#x27;</span>)</span><br><span class="line">df_train[<span class="string">&#x27;Num_words_text&#x27;</span>] = df_train[<span class="string">&#x27;text&#x27;</span>].apply(<span class="keyword">lambda</span> x: <span class="built_in">len</span>(<span class="built_in">str</span>(x).split())) </span><br></pre></td></tr></table></figure>

<ul>
<li>首先读取一个csv文件</li>
<li>之后将其按照正则表达式<code>lambda x: len(str(x).split())</code>进行处理</li>
<li>也就是根据输入的<code>x</code>返回<code>x的长度</code></li>
<li>这样就将<code>text</code>列的长度保存在了<code>num_words_text</code>列中</li>
</ul>
<h2 id="第十章-导入包"><a href="#第十章-导入包" class="headerlink" title="第十章 导入包"></a>第十章 导入包</h2><h3 id="常见语法"><a href="#常见语法" class="headerlink" title="常见语法"></a>常见语法</h3><ul>
<li>直接导入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pf</span><br></pre></td></tr></table></figure>

<ul>
<li>from导入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="comment"># 效果等同于 import torch.nn as nn</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导入当前文件夹的内容</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pythonfile</span><br></pre></td></tr></table></figure>

<ul>
<li>导入上一级文件夹的内容</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .. <span class="keyword">import</span> pythonfile1  <span class="comment"># 从上一级目录导入pythonfile1.py</span></span><br><span class="line"><span class="keyword">from</span> ..folder <span class="keyword">import</span> pythonfile2  <span class="comment"># 从上一级目录下的folder文件夹中导入pythonfile2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导入上两级文件夹的内容</li>
</ul>
<p>多用一个<code>.</code>，其他一样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ... <span class="keyword">import</span> pythonfile3</span><br><span class="line"><span class="keyword">from</span> ...folder <span class="keyword">import</span> pythonfile4</span><br></pre></td></tr></table></figure>



<ul>
<li>导入时的二级目录和一级目录之间用<code>.</code>隔开，而不是斜线</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ...folder.subfolder <span class="keyword">import</span> pythonfile5</span><br></pre></td></tr></table></figure>

<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p><img src="C:\Users\ALIENWARE\AppData\Roaming\Typora\typora-user-images\image-20230507124737214.png" alt="image-20230507124737214"></p>
<h2 id="第十一章-特殊关键词"><a href="#第十一章-特殊关键词" class="headerlink" title="第十一章 特殊关键词"></a>第十一章 特殊关键词</h2><h3 id="1-any"><a href="#1-any" class="headerlink" title="1.any"></a>1.any</h3><p>用于判断一个<code>iterable</code>中有没有除了<code>0, None, False, None</code>以外的其他值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">any</span>(num % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">for</span> num <span class="keyword">in</span> numbers):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;列表中存在偶数&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;列表中不存在偶数&quot;</span>)</span><br></pre></td></tr></table></figure>







<h2 id="第十二章-装饰器"><a href="#第十二章-装饰器" class="headerlink" title="第十二章 装饰器"></a>第十二章 装饰器</h2><h3 id="1-dataclass"><a href="#1-dataclass" class="headerlink" title="1.@dataclass"></a>1.@dataclass</h3><p>例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>:</span><br><span class="line">  a: <span class="built_in">int</span> </span><br><span class="line">  b: <span class="built_in">int</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，a和b都将包含在添加的<code>__init__()</code>方法中，他们将被定义为:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, a:<span class="built_in">int</span>, b:<span class="built_in">int</span>=<span class="number">0</span></span>):</span><br></pre></td></tr></table></figure>

<p>意思就是类中的变量会自动写到init方法中，在初始化对象时，直接赋值给对象，从而达到了简化代码的效果</p>
<p>如果用init函数，就需要这样写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>:</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,a,b</span>):</span><br><span class="line">    self.a = a</span><br><span class="line">    self.b = b</span><br></pre></td></tr></table></figure>

<p>如果在需要初始化变量很多的情况下，就会更麻烦</p>
<h3 id="2-rpc"><a href="#2-rpc" class="headerlink" title="2.@rpc"></a>2.@rpc</h3><p><code>@rpc</code>是一个装饰器，用于创建远程过程调用（Remote Procedure Call，RPC）服务</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/07/python/python%E5%9F%BA%E7%A1%80/python2/" data-id="clkkqtvy5000f6dfy5qs83daw" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-笔记/论文/transformer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/02/%E7%AC%94%E8%AE%B0/%E8%AE%BA%E6%96%87/transformer/" class="article-date">
  <time class="dt-published" datetime="2023-05-02T09:59:36.231Z" itemprop="datePublished">2023-05-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/02/%E7%AC%94%E8%AE%B0/%E8%AE%BA%E6%96%87/transformer/" data-id="clkkqtvyj00186dfy8zyh91es" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-python/NLP/NLP基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/02/python/NLP/NLP%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2023-05-02T08:41:54.225Z" itemprop="datePublished">2023-05-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一-文本标记"><a href="#一-文本标记" class="headerlink" title="一 文本标记"></a>一 文本标记</h2><h3 id="1-特殊符号"><a href="#1-特殊符号" class="headerlink" title="1.特殊符号"></a>1.特殊符号</h3><ul>
<li><code>&lt;PAD&gt;</code>：用于填充序列，使其长度一致。在序列长度不一致的情况下，可以使用<PAD>符号将序列填充到相同长度，便于进行批量处理。</li>
<li><code>&lt;UNK&gt;</code>：表示未知的词或符号，常用于处理未出现过的单词或符号。在进行文本处理时，会遇到一些未见过的单词或符号，这时可以使用<UNK>符号来代替这些未知的单词或符号。</li>
<li><code>&lt;EOS&gt;</code>：用于表示句子的结束。在进行文本生成任务时，可以使用<EOS>符号来表示生成的文本已经结束，避免模型继续生成无意义的文本。</li>
<li><code>&lt;BOS&gt;</code>：用于表示句子的开始。在进行文本生成任务时，可以使用<BOS>符号来表示文本的开始，帮助模型生成合理的文本。</li>
<li><code>&lt;SEP&gt;</code>：用于分隔不同的句子或文本片段。在进行文本分类、命名实体识别、问答等任务时，可以使用<SEP>符号来分隔不同的句子或文本片段，便于模型理解语义和句子之间的关系。</li>
<li><code>&lt;CLS&gt;</code>：用于表示句子的类别或标签。在进行文本分类任务时，可以使用<CLS>符号来表示句子的类别或标签，帮助模型进行分类。</li>
</ul>
<h3 id="2-使用方法"><a href="#2-使用方法" class="headerlink" title="2.使用方法"></a>2.使用方法</h3><p>CLS和BERT的使用</p>
<p>假设我们有两个句子：</p>
<p>句子1：我喜欢看电影。</p>
<p>句子2：你呢？</p>
<p>我们可以将这两个句子连接在一起，形成一个输入序列：</p>
<p>[CLS] 我喜欢看电影。 [SEP] 你呢？ [SEP]</p>
<p>在这个序列中，[CLS]标记表示句子的开头，[SEP]标记则用于分隔两个句子。整个序列可以作为BERT模型的输入，模型会自动学习句子之间的关系和语义信息。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/02/python/NLP/NLP%E5%9F%BA%E7%A1%80/" data-id="clkkqtvy3000b6dfy2irr5wud" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-python/常用库/openAI" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/02/python/%E5%B8%B8%E7%94%A8%E5%BA%93/openAI/" class="article-date">
  <time class="dt-published" datetime="2023-05-02T08:09:44.677Z" itemprop="datePublished">2023-05-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-mag"><a href="#1-mag" class="headerlink" title="1.mag"></a>1.mag</h2><h3 id="（1）简介"><a href="#（1）简介" class="headerlink" title="（1）简介"></a>（1）简介</h3><p>在深度学习中，”mag”是一个由OpenAI开发的Python库，用于简化机器学习实验和开发工作流程。Mag中包含了许多便捷的功能和工具，可以帮助用户更轻松地进行模型训练、调试、可视化和部署。</p>
<p>Mag库的一些主要功能包括：</p>
<ol>
<li>自动化模型训练：Mag使模型训练过程更加简单，可以根据需要自动调整超参数、记录实验结果、可视化训练进度等。</li>
<li>模型可视化：Mag提供了可视化工具，可以帮助用户更好地理解和分析模型的性能、结构和特征。</li>
<li>实验管理：Mag可以帮助用户管理不同的实验，并保存实验结果、模型权重和代码等信息。</li>
<li>代码重用：Mag提供了一系列通用的模型组件和工具，可以帮助用户更轻松地重用代码和构建复杂的模型。</li>
</ol>
<p>总之，Mag是一个强大而易于使用的深度学习工具库，可以帮助用户更快速、高效地进行模型开发和实验。</p>
<h3 id="（2）代码"><a href="#（2）代码" class="headerlink" title="（2）代码"></a>（2）代码</h3><p><a target="_blank" rel="noopener" href="https://github.com/ex4sperans/maggot">https://github.com/ex4sperans/maggot</a></p>
<h3 id="（3）安装"><a href="#（3）安装" class="headerlink" title="（3）安装"></a>（3）安装</h3><p><code>pip install maggot</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/02/python/%E5%B8%B8%E7%94%A8%E5%BA%93/openAI/" data-id="clkkqtvy000086dfy0l2j5isy" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-python/jupyter" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/01/python/jupyter/" class="article-date">
  <time class="dt-published" datetime="2023-05-01T14:03:27.000Z" itemprop="datePublished">2023-05-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、jupyter的常用快捷键"><a href="#一、jupyter的常用快捷键" class="headerlink" title="一、jupyter的常用快捷键"></a>一、jupyter的常用快捷键</h2><blockquote>
<p>以下是一些常用的 Jupyter Notebook 快捷键及其作用：</p>
</blockquote>
<ul>
<li>Enter：进入编辑模式，可以编辑单元格中的内容</li>
<li>Esc：退出编辑模式，进入命令模式</li>
<li>Shift + Enter：运行本单元格并选中下个单元格，如果下个单元格不存在则新建一个单元格</li>
<li>Ctrl + Enter：运行本单元格但不选中下个单元格</li>
<li>Alt + Enter：运行本单元格并在下方新建一个单元格</li>
<li>Y：将单元格转换为代码单元格</li>
<li>M：将单元格转换为 Markdown 单元格</li>
<li>A：在当前单元格上方插入一个新单元格</li>
<li>B：在当前单元格下方插入一个新单元格</li>
<li>X：剪切当前单元格</li>
<li>C：复制当前单元格</li>
<li>V：在当前单元格下方粘贴</li>
<li>D,D：删除当前单元格</li>
<li>Z：撤销上一个操作</li>
<li>Shift + Up&#x2F;Down：选中多个单元格</li>
<li>Shift + M：合并多个单元格</li>
<li>Shift + L：显示&#x2F;隐藏代码行数</li>
<li>Shift + Tab：查看函数&#x2F;方法的参数说明</li>
</ul>
<p>在命令模式下输入 H，可以查看更详细的快捷键说明。</p>
<h2 id="二、jupyter原理"><a href="#二、jupyter原理" class="headerlink" title="二、jupyter原理"></a>二、jupyter原理</h2><p><img src="https://docs.jupyter.org/en/latest/_images/repos_map.png" alt="img"></p>
<h2 id="三、魔法命令"><a href="#三、魔法命令" class="headerlink" title="三、魔法命令"></a>三、魔法命令</h2><h3 id="1-time"><a href="#1-time" class="headerlink" title="1.%%time"></a>1.<code>%%time</code></h3><p>作用：显示当前单元格的运行时间</p>
<blockquote>
<p>注意，必须用在单元格的最上方，%%time的上方不能有任何代码，包括注释</p>
</blockquote>
<p>生成的内容：</p>
<p><code>CPU_time</code>和<code>Wall_time</code></p>
<p>其中，<code>CPU times</code>表示代码单元格在CPU上花费的总时间，包括用户代码执行和操作系统调度等。<code>user</code>表示代码单元格在用户模式下花费的时间，即CPU执行用户代码的时间。<code>sys</code>表示代码单元格在内核模式下花费的时间，即CPU执行操作系统调度代码的时间。<code>total</code>表示<code>user</code>和<code>sys</code>时间的总和。</p>
<p><code>Wall time</code>从开始执行代码到执行结束的实际时间。与<code>CPU times</code>不同，<code>Wall time</code>可能包括了其他因素的影响，例如操作系统中断、I&#x2F;O等待等。</p>
<h2 id="四、jupyter-lab与ipykernel"><a href="#四、jupyter-lab与ipykernel" class="headerlink" title="四、jupyter lab与ipykernel"></a>四、jupyter lab与ipykernel</h2><h3 id="1-ipykernel"><a href="#1-ipykernel" class="headerlink" title="1.ipykernel"></a>1.ipykernel</h3><p>每一个conda环境都需要安装一个ipykernel，最好使用conda安装而不是pip安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">切换到希望使用的conda环境</span></span><br><span class="line">conda activate &lt;环境名称&gt;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装ipykernel</span></span><br><span class="line">conda install ipykernel </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为conda环境配置ipykernel</span></span><br><span class="line">python -m ipykernel install --user --name=&lt;环境名称&gt;</span><br></pre></td></tr></table></figure>










      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/01/python/jupyter/" data-id="clkkqtvxx00046dfy9cb57cl7" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/07/26/sbert/">SBERT</a>
          </li>
        
          <li>
            <a href="/2023/07/25/pycharm%E4%B8%AD%E7%9A%84git%E6%93%8D%E4%BD%9C/">pycharm中的git操作</a>
          </li>
        
          <li>
            <a href="/2023/07/24/test/">测试使用hexo</a>
          </li>
        
          <li>
            <a href="/2023/07/24/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2023/07/20/%E7%AC%94%E8%AE%B0/leetcode%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>